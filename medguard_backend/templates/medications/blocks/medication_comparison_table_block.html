{% load wagtailcore_tags %}

<div class="medication-comparison-table-block">
    {% if value.title %}
        <h3 class="comparison-table-title">{{ value.title }}</h3>
    {% endif %}
    
    {% if value.comparison_type %}
        <div class="comparison-type-badge badge badge-{{ value.comparison_type }}">
            {{ value.get_comparison_type_display }}
        </div>
    {% endif %}
    
    {% if value.table_rows %}
        <div class="table-responsive">
            <table class="table table-striped table-hover medication-comparison-table">
                <thead>
                    <tr>
                        <th scope="col">{{ _('Medication Name') }}</th>
                        <th scope="col">{{ _('Dosage') }}</th>
                        <th scope="col">{{ _('Side Effects') }}</th>
                        <th scope="col">{{ _('Cost') }}</th>
                        <th scope="col">{{ _('Efficacy') }}</th>
                        <th scope="col">{{ _('Notes') }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in value.table_rows %}
                        <tr>
                            <td>{{ row.medication_name }}</td>
                            <td>{{ row.dosage }}</td>
                            <td>{{ row.side_effects }}</td>
                            <td>{{ row.cost }}</td>
                            <td>{{ row.efficacy }}</td>
                            <td>
                                {% if row.notes %}
                                    {% include_block row.notes %}
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
    
    {% if value.notes %}
        <div class="comparison-notes mt-3">
            <h4>Notes:</h4>
            {% include_block value.notes %}
        </div>
    {% endif %}
</div>

<style>
.medication-comparison-table-block {
    margin: 2rem 0;
    padding: 1.5rem;
    border: 1px solid #e2e8f0;
    border-radius: 0.5rem;
    background-color: #f8fafc;
}

.comparison-table-title {
    color: #1e293b;
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1rem;
}

.comparison-type-badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    font-size: 0.875rem;
    font-weight: 500;
    border-radius: 9999px;
    margin-bottom: 1rem;
}

.badge-dosage { background-color: #dbeafe; color: #1e40af; }
.badge-side_effects { background-color: #fef3c7; color: #d97706; }
.badge-interactions { background-color: #fecaca; color: #dc2626; }
.badge-cost { background-color: #d1fae5; color: #059669; }
.badge-efficacy { background-color: #e0e7ff; color: #7c3aed; }
.badge-generic_vs_brand { background-color: #f3e8ff; color: #9333ea; }

.medication-comparison-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1rem;
}

.medication-comparison-table th {
    background-color: #f1f5f9;
    color: #334155;
    font-weight: 600;
    padding: 0.75rem;
    text-align: left;
    border-bottom: 2px solid #e2e8f0;
}

.medication-comparison-table td {
    padding: 0.75rem;
    border-bottom: 1px solid #e2e8f0;
    vertical-align: top;
}

.medication-comparison-table tbody tr:hover {
    background-color: #f8fafc;
}

.number-value {
    font-family: 'Courier New', monospace;
    font-weight: 600;
    color: #059669;
}

.boolean-value {
    display: inline-block;
    width: 1.5rem;
    height: 1.5rem;
    border-radius: 50%;
    text-align: center;
    line-height: 1.5rem;
    font-weight: bold;
}

.boolean-value.true {
    background-color: #d1fae5;
    color: #059669;
}

.boolean-value.false {
    background-color: #fecaca;
    color: #dc2626;
}

.comparison-notes {
    background-color: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: 0.375rem;
    padding: 1rem;
}

.comparison-notes h4 {
    color: #d97706;
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

@media (max-width: 768px) {
    .medication-comparison-table-block {
        padding: 1rem;
        margin: 1rem 0;
    }
    
    .medication-comparison-table {
        font-size: 0.875rem;
    }
    
    .medication-comparison-table th,
    .medication-comparison-table td {
        padding: 0.5rem;
    }
}
</style> 